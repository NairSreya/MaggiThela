<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Maggi Thela</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: none !important;
    }

    html, body {
      width: 100%;
      height: 100%;
      font-family: sans-serif;
      color: #f5f5f5;
      overflow: hidden;
      background-color: #E0EAD7;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Animated Background Elements */
    .cloud{
      position: absolute;
      z-index: 0;
      opacity: 0.3;
    }

    .cloud {
      width: 150px;
      height: 80px;
      background: #ffffff;
      border-radius: 50%;
      box-shadow: 60px 0 #ffffff, 30px -20px #ffffff, 90px -10px #ffffff;
      animation: floatClouds 50s linear infinite;
      top: 10%;
    }

    .cloud:nth-child(1) {
      left: -200px;
      animation-delay: 0s;
    }
    .cloud:nth-child(2) {
      left: -300px;
      top: 20%;
      animation-delay: 10s;
      transform: scale(0.8);
    }

    @keyframes floatClouds {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(200vw);
      }
    }

    /* Navigation Bar Styles */
    .nav-container {
      background: white;
      padding: 10px 20px;
      border-radius: 50px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      display: flex;
      gap: 60px;
      position: fixed;
      top: 20px;
      z-index: 1000;
    }

    .nav-container a {
      text-decoration: none;
      color: #333;
      padding: 10px 20px;
      border-radius: 30px;
      transition: 0.3s ease;
    }

    .nav-container a:hover {
      background-color: #A9B86E;
    }

    .nav-container a.active {
      background-color: #A9B86E;
      color: black;
    }

    /* Main Container */
    .container {
      flex-grow: 1;
      width: 100vw;
      height: 100vh;
      position: relative;
      display: flex;
      justify-content: right;
      align-items: center;
      z-index: 1;
    }

    .container img {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
      display: block;
    }

    .button {
      position: absolute;
      background-color: rgba(255, 255, 255, 0);
      border: none;
      cursor: pointer !important;
    }

    .menu-button {
      top: 76%;
      left: 18%;
      width: 26%;
      height: 12%;
    }

    .recipe-button {
      top: 76%;
      left: 52%;
      width: 30%;
      height: 12%;
    }

    /* Side Tiles */
    .side-tiles {
      position: fixed;
      left: 250px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: row;
      gap: 100px;
      z-index: 100;
    }

    .tile {
      width: 300px;
      height: 300px;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-decoration: none;
      color: #333;
      transition: all 0.4s ease;
      overflow: hidden;
      position: relative;
    }

    .tile:hover {
      transform: translateY(-8px) scale(1.05);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .tile::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: #A9B86E;
      transform: translateY(8px);
      transition: transform 0.3s ease;
    }

    .tile:hover::after {
      transform: translateY(0);
    }

    .tile-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    .tile-text {
      font-weight: bold;
      font-size: 20px;
      color: #333;
    }

    .tile1-icon .icon-img,
    .tile2-icon .icon-img {
      width: 90px;
      height: auto;
      margin-bottom: 5px;
    }
    
    .tile1-text,
    .tile2-text {
      font-size: 18px;
      font-weight: 500;
    }

    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #A9B86E;
      color: #fff;
      text-align: center;
      font-size: 1rem;
      padding: 10px 0;
      z-index: 999;
      overflow: hidden;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .footer p {
      margin-top: 5px;
      font-size: 0.9rem;
    }

    /* Custom Cursor */
    #custom-cursor {
      position: fixed;
      width: 64px;
      height: 64px;
      background-image: url('chopstick.png');
      background-size: contain;
      background-repeat: no-repeat;
      pointer-events: none;
      z-index: 9999;
      transform: translate(-50%, -50%);
    }

    /* Responsive Styles */
    @media (max-width: 1200px) {
      .side-tiles {
        left: 50%;
        transform: translate(-50%, -50%);
        gap: 40px;
      }
      
      .tile {
        width: 250px;
        height: 250px;
      }
    }

    @media (max-width: 768px) {
      .nav-container {
        gap: 20px;
        padding: 5px 15px;
      }
      
      .menu-button, 
      .recipe-button {
        top: 76%;
        height: 13%;
      }

      .side-tiles {
        flex-direction: column;
        left: 50%;
        top: auto;
        bottom: 150px;
        transform: translateX(-50%);
        gap: 20px;
      }

      .tile {
        width: 180px;
        height: 180px;
      }

      .tile1-icon .icon-img,
      .tile2-icon .icon-img {
        width: 60px;
      }

      .tile1-text,
      .tile2-text {
        font-size: 16px;
      }
    }
    /* Login Modal Styles */
    .login-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .login-content {
      background-color: white;
      padding: 30px;
      border-radius: 15px;
      width: 350px;
      color: #333;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }
    
    .login-content h2 {
      margin-bottom: 20px;
      color: #333;
      text-align: center;
      font-size: 24px;
    }
    
    .login-content input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }
    
    .login-content .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    
    .login-content button {
      background-color: #A9B86E;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer !important;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    
    .login-content button:hover {
      background-color: #91a154;
    }
    
    .close-button {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 24px;
      color: #333;
      cursor: pointer !important;
      background: none;
      border: none;
    }
    
    .user-status {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: white;
      padding: 8px 15px;
      border-radius: 30px;
      z-index: 1001;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .login-button {
      background-color: #A9B86E;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 30px;
      cursor: pointer !important;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <!-- Animated Background -->
  <div class="cloud"></div>
  <div class="cloud"></div>
    
  <!-- Custom Cursor -->
  <div id="custom-cursor"></div>
  
  <!-- User Authentication Status -->
  <div class="user-status">
    
    <button class="login-button" onclick="toggleLoginModal()">Login</button>
  </div>

  <!-- Top NavBar -->
  <nav class="nav-container">
    <a href="index.html" class="active">Home</a>
    <a href="menu.html">Menu</a>
    <a href="recipe.html">Recipe</a>
  </nav>

  <!-- Side Tiles -->
  <div class="side-tiles">
    <a href="menu.html" class="tile">
      <div class="tile1-icon">
        <img src="cat_cooking.png" alt="Noodles Icon" class="icon-img" />
      </div>
      <div class="tile1-text">Read Recipe</div>
    </a>
    <a href="recipe.html" class="tile">
      <div class="tile2-icon">
        <img src="cat_writing.png" alt="Noodles Icon" class="icon-img" />
      </div>
      <div class="tile2-text">Write Recipe</div>
    </a>
  </div>

  <!-- Main Content -->
  <div class="container">
    <img src="maggi.png" alt="Maggi Thela" />
    <button class="button menu-button" onclick="window.location.href='menu.html'"></button>
    <button class="button recipe-button" onclick="window.location.href='recipe.html'"></button>
  </div>
  
  <!-- Footer -->
  <footer class="footer">
    <p>Made with ❤️ and Maggi</p>
  </footer>

  <!-- Login Modal -->
  <div id="login-modal" class="login-modal">
    <div class="login-content">
      <h2>Login to Maggi Thela</h2>
      <input type="email" id="email" placeholder="Email" />
      <input type="password" id="password" placeholder="Password" />
      <div class="button-group">
        <button onclick="handleLogin()">Login</button>
        <button onclick="handleSignup()">Sign Up</button>
      </div>
      <button class="close-button" onclick="toggleLoginModal()">×</button>
    </div>
  </div>

  <!-- Custom Cursor Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const cursor = document.getElementById('custom-cursor');
      
      document.addEventListener('mousemove', function(e) {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
      });
      
      // Hide cursor when leaving window
      document.addEventListener('mouseout', function() {
        cursor.style.display = 'none';
      });
      
      document.addEventListener('mouseover', function() {
        cursor.style.display = 'block';
      });
    });

    // Login Modal
    function toggleLoginModal() {
      const modal = document.getElementById('login-modal');
      if (modal.style.display === 'flex') {
        modal.style.display = 'none';
      } else {
        modal.style.display = 'flex';
      }
    }
  </script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
  
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  
  // Check auth state
  onAuthStateChanged(auth, (user) => {
    const userDisplay = document.getElementById("user-display");
    const loginButton = document.querySelector(".login-button");
    
    if (user) {
      // User is signed in
      userDisplay.textContent = `Welcome, ${user.email}`;
      loginButton.textContent = "Logout";
      loginButton.onclick = handleLogout;
      
      // Enable add recipe functionality
      sessionStorage.setItem('userLoggedIn', 'true');
    } else {
      // User is signed out
      
      loginButton.textContent = "Login";
      loginButton.onclick = toggleLoginModal;
      
      // Disable add recipe functionality
      
    }
  });
  
  window.handleSignup = function () {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    
    createUserWithEmailAndPassword(auth, email, password)
      .then(userCredential => {
        alert("Signup successful!");
        console.log(userCredential.user);
        toggleLoginModal(); // Close modal after signup
      })
      .catch(error => {
        alert("Signup error: " + error.message);
      });
  };
  
  window.handleLogin = function () {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    
    signInWithEmailAndPassword(auth, email, password)
      .then(userCredential => {
        alert("Login successful!");
        console.log(userCredential.user);
        toggleLoginModal(); // Close modal after login
        
        // Get the redirect URL from sessionStorage if it exists
        const redirectUrl = sessionStorage.getItem('redirectAfterLogin');
        if (redirectUrl) {
          sessionStorage.removeItem('redirectAfterLogin');
          window.location.href = redirectUrl;
        }
      })
      .catch(error => {
        alert("Login error: " + error.message);
      });
  };
  
  window.handleLogout = function() {
    signOut(auth).then(() => {
      // Sign-out successful
      alert("Logged out successfully!");
    }).catch((error) => {
      // An error happened
      alert("Logout error: " + error.message);
    });
  };
</script>

<!-- Add this script to handle recipe button clicks -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle write recipe button click
    const recipeButton = document.querySelector('.recipe-button');
    const writeRecipeTile = document.querySelector('.tile:nth-child(2)');
    
    function handleRecipeClick(event) {
      const isLoggedIn = sessionStorage.getItem('userLoggedIn') === 'true';
      
      if (!isLoggedIn) {
        event.preventDefault(); // Prevent default navigation
        alert("You need to be logged in to add recipes!");
        
        // Store the intended destination to redirect after login
        sessionStorage.setItem('redirectAfterLogin', 'recipe.html');
        
        // Show login modal
        toggleLoginModal();
        return false;
      }
      // If logged in, navigation proceeds normally
    }
    
    // Add click listeners to both recipe buttons
    if (recipeButton) {
      recipeButton.addEventListener('click', function(event) {
        handleRecipeClick(event);
      });
    }
    
    if (writeRecipeTile) {
      writeRecipeTile.addEventListener('click', function(event) {
        handleRecipeClick(event);
      });
    }
  });
</script>

  <!-- Import Firebase SDKs -->
  
</body>
</html>
